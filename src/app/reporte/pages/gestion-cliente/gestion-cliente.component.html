<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="ball-spin" [fullScreen]="true">
  <p style="color: white"> Cargando... </p>
</ngx-spinner>

<div class="card col">
  <div class="p-grid">
    <div class="p-col-12 p-lg-12 p-md-12 p-sm-12">
      <div class="p-fluid p-formgrid p-grid">
        <div class="p-field p-col-3 p-lg-3 p-md-6 p-sm-12">
          <label for="tipoDoc">Tipo Documento:</label>
          <p-dropdown [options]="tipoDocumentosList" [(ngModel)]="documentoSeleccionado" optionLabel="nombre" optionValue="id" name="tipoDoc"></p-dropdown>
        </div>
        <div class="p-field p-col-3 p-lg-3 p-md-3 p-sm-12">
          <label for="documento">Documento:</label>
          <input type="text" autofocus autocomplete="off" pInputText
            aria-describedby="tipoDoc-help"
            [(ngModel)]="nroDocumento" required tabindex="1" name="documento"
          >
        </div>
        <div class="p-field p-col-2 p-lg-2 p-md-2 p-sm-12 p-mt-4">
          <button pRipple pButton label="Buscar" icon="pi pi-search" (click)="buscar()"> </button>
        </div>
      </div>
    </div>

    <div class="p-col-6 p-mb-2 p-mt-2 accordion-container">
      <p-fieldset legend="Actualiza Tratamiento">
        <form #actualizaTratamientoForm="ngForm">
          <div class="p-field">
            <label for="marca">Marca :</label>
            <div class="p-inputgroup">
              <p-dropdown 
                [options]="marcasList" [(ngModel)]="actualizaTratamiento.marca" optionLabel="nombre" optionValue="id" 
                [ngClass] = "{' ng-invalid ng-dirty ': marca.invalid && (marca.dirty || marca.touched)}" #marca="ngModel" name="marca"
              >
              </p-dropdown>
            </div>
          </div>
          <div class="p-field">
            <label for="gestionDatos">Gestion Datos :</label>
            <div class="p-inputgroup">
              <p-inputSwitch 
                [(ngModel)]="actualizaTratamiento.gestionDatos" #gestionDatos="ngModel" 
                [ngClass] = "{' ng-invalid ng-dirty ': gestionDatos.invalid && (gestionDatos.dirty || gestionDatos.touched)}" name="gestionDatos"
              >
              </p-inputSwitch>
            </div>
            <small *ngIf="gestionDatos.invalid && (gestionDatos.dirty || gestionDatos.touched)" id="gestionDatos-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>
          <div class="p-field">
            <label for="tipoDoc">Tipo Documento :</label>
            <div class="p-inputgroup">
              <p-dropdown 
                [options]="tipoDocumentosList" [(ngModel)]="actualizaTratamiento.tipoDoc" optionLabel="nombre" 
                optionValue="id" name="tipoDoc" #tipoDoc="ngModel" 
              >
              </p-dropdown>
            </div>
          </div>
          <div class="p-field">
            <label for="documento">Documento :</label>
            <div class="p-inputgroup">
              <input type="text" autofocus autocomplete="off" pInputText
                [ngClass] = "{' ng-invalid ng-dirty ': documento.invalid && (documento.dirty || documento.touched)}"  
                aria-describedby="documento-help"
                [(ngModel)]="actualizaTratamiento.documento" required name="documento" #documento="ngModel" tabindex="1" disabled>
            </div>
          </div>
          <div>
            <button pButton pRipple type="button" id="btnCliente" label="Actualizar" tabindex="3"
              (click)="actualizarTratamiento()" [disabled]="!actualizaTratamientoForm.form.valid">
            </button>
          </div>
        </form>
      </p-fieldset>
    </div>

    <div class="p-col-6 p-mb-2 p-mt-2 accordion-container">
      <p-fieldset legend="Registra Cliente unico">
        <form #registraClienteForm="ngForm">
          <div class="p-field ">
            <label for="nombre">Nombre :</label>
            <div class="p-inputgroup">
              <input type="text" autofocus autocomplete="off" pInputText
                [ngClass] = "{' ng-invalid ng-dirty ': nombre.invalid && (nombre.dirty || nombre.touched)}"  
                aria-describedby="nombre-help"
                [(ngModel)]="registraCliente.nombre" required name="nombre" #nombre="ngModel">
            </div>
            <small *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)" id="nombre-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>
          <div class="p-field ">
            <label for="apellidoPater">Apellido Paterno :</label>
            <div class="p-inputgroup">
              <input type="text" autofocus autocomplete="off" pInputText
                [ngClass] = "{' ng-invalid ng-dirty ': apellidoPater.invalid && (apellidoPater.dirty || apellidoPater.touched)}"  
                aria-describedby="apellidoPater-help"
                [(ngModel)]="registraCliente.apellidoPater" required name="apellidoPater" #apellidoPater="ngModel">
            </div>
            <small *ngIf="apellidoPater.invalid && (apellidoPater.dirty || apellidoPater.touched)" id="apellidoPater-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>
          <div class="p-field ">
            <label for="apellidoMat">Apellido Materno :</label>
            <div class="p-inputgroup">
              <input type="text" autofocus autocomplete="off" pInputText
                [ngClass] = "{' ng-invalid ng-dirty ': apellidoMat.invalid && (apellidoMat.dirty || apellidoMat.touched)}"  
                aria-describedby="apellidoMat-help"
                [(ngModel)]="registraCliente.apellidoMat" required name="apellidoMat" #apellidoMat="ngModel">
            </div>
            <small *ngIf="apellidoMat.invalid && (apellidoMat.dirty || apellidoMat.touched)" id="apellidoMat-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>
          <div class="p-field">
            <label for="tipoDoc">Tipo Documento :</label>
            <div class="p-inputgroup">
              <p-dropdown 
                [options]="tipoDocumentosList" [(ngModel)]="registraCliente.tipoDoc" optionLabel="nombre" 
                optionValue="id" name="tipoDoc" #tipoDoc="ngModel" 
              >
              </p-dropdown>
            </div>
            <small *ngIf="tipoDoc.invalid && (tipoDoc.dirty || tipoDoc.touched)" id="tipoDoc-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>
          <div class="p-field">
            <label for="documento">Documento :</label>
            <div class="p-inputgroup">
              <input type="text" autofocus autocomplete="off" pInputText
                [ngClass] = "{' ng-invalid ng-dirty ': documento.invalid && (documento.dirty || documento.touched)}"  
                aria-describedby="documento-help"
                [(ngModel)]="registraCliente.documento" required name="documento" #documento="ngModel">
            </div>
            <small *ngIf="documento.invalid && (documento.dirty || documento.touched)" id="documento-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>
          <div class="p-field ">
            <label for="telefono">Telefono</label>
            <div class="p-inputgroup">
              <input type="text" autofocus autocomplete="off" pInputText
                [ngClass] = "{' ng-invalid ng-dirty ': telefono.invalid && (telefono.dirty || telefono.touched)}"  
                aria-describedby="telefono-help"
                [(ngModel)]="registraCliente.telefono" required name="telefono" #telefono="ngModel">
            </div>
            <small *ngIf="telefono.invalid && (telefono.dirty || telefono.touched)" id="telefono-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>
          <div class="p-field ">
            <label for="correo">Correo</label>
            <div class="p-inputgroup">
              <input type="text" autofocus autocomplete="off" pInputText
                [ngClass] = "{' ng-invalid ng-dirty ': correo.invalid && (correo.dirty || correo.touched)}"  
                aria-describedby="correo-help"
                [(ngModel)]="registraCliente.correo" required name="correo" #correo="ngModel">
            </div>
            <small *ngIf="correo.invalid && (correo.dirty || correo.touched)" id="correo-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>
          <div class="p-field ">
            <label for="direccion">Direccion</label>
            <div class="p-inputgroup">
              <input type="text" autofocus autocomplete="off" pInputText
                [ngClass] = "{' ng-invalid ng-dirty ': direccion.invalid && (direccion.dirty || direccion.touched)}"  
                aria-describedby="direccion-help"
                [(ngModel)]="registraCliente.direccion" required name="direccion" #direccion="ngModel">
            </div>
            <small *ngIf="direccion.invalid && (direccion.dirty || direccion.touched)" id="direccion-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>
          <div class="p-field">
            <label for="marca">Marca :</label>
            <div class="p-inputgroup">
              <p-dropdown 
                [options]="marcasList" [(ngModel)]="registraCliente.marca" optionLabel="nombre" optionValue="id" 
                [ngClass] = "{' ng-invalid ng-dirty ': marca.invalid && (marca.dirty || marca.touched)}" #marca="ngModel" name="marca"
              >
              </p-dropdown>
            </div>
            <small *ngIf="marca.invalid && (marca.dirty || marca.touched)" id="marca-help"
              class="p-error">La <strong>marca</strong> es requerida.
            </small>
          </div>
          <div class="p-field">
            <label for="canal">Canal :</label>
            <div class="p-inputgroup">
              <p-dropdown 
                [options]="canalesList" [(ngModel)]="registraCliente.canal" optionLabel="nombre" optionValue="id" 
                [ngClass] = "{' ng-invalid ng-dirty ': canal.invalid && (canal.dirty || canal.touched)}" #canal="ngModel" name="canal"
              >
              </p-dropdown>
            </div>
          </div>
          <div class="p-field">
            <label for="gestionDatos">Gestion Datos :</label>
            <div class="p-inputgroup">
              <p-inputSwitch 
                [(ngModel)]="registraCliente.gestionDatos" #gestionDatos="ngModel" name="gestionDatos"
              >
              </p-inputSwitch>
            </div>
            <small *ngIf="gestionDatos.invalid && (gestionDatos.dirty || gestionDatos.touched)" id="gestionDatos-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>
          <div class="p-field">
            <label for="publicidad">Publicidad :</label>
            <div class="p-inputgroup">
              <p-inputSwitch 
                [(ngModel)]="registraCliente.publicidad" #publicidad="ngModel" name="publicidad"
              >
              </p-inputSwitch>
            </div>
            <small *ngIf="publicidad.invalid && (publicidad.dirty || publicidad.touched)" id="publicidad-help"
              class="p-error">Este <strong>campo</strong> es requerido.
            </small>
          </div>

          <div>
            <button pButton pRipple type="button" id="btnCliente" label="Registrar" tabindex="3"
              (click)="registraClienteUnico()" [disabled]="!registraClienteForm.form.valid">
            </button>
          </div>
        </form>
      </p-fieldset>
    </div>
  </div>
</div>
